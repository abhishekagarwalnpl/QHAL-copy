<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>metadata &mdash; Quantum HAL Specificationsv0.2.0</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/toggleprompt.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="HAL Commands Minimal Requirements" href="minimal_req.html" />
    <link rel="prev" title="HAL Architecture" href="hal_architecture.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Quantum HAL Specifications
          </a>
              <div class="version">
                v0.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary and Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="general.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal_architecture.html">HAL Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Metadata Format Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="#level-3-hal-application-level">Level 3 HAL – application level</a></li>
<li class="toctree-l2"><a class="reference internal" href="#level-2-hal-shot-level">Level 2 HAL – shot level</a></li>
<li class="toctree-l2"><a class="reference internal" href="#level-1-hal-gate-level">Level 1 HAL – gate level</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metadata-encoding">Metadata Encoding</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="minimal_req.html">HAL Commands Minimal Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal_features.html">HAL Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="hal_commands_specifications.html">HAL Commands Format Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="optional_packages.html">Optional HAL Packages/Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="standards.html">Standards and Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_case_scenarios.html">Use Case Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix1.html">Appendix 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix2.html">Appendix 2: Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="further_reading.html">Further reading</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Quantum HAL Specifications</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>metadata</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/riverlane/QHAL_internal/blob/dev/docs/metadata.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="metadata-format-specification">
<h1>Metadata Format Specification<a class="headerlink" href="#metadata-format-specification" title="Permalink to this headline"></a></h1>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline"></a></h2>
<p>The primary purpose of Metadata is to:</p>
<ul class="simple">
<li><p>Allow the hardware companies to defend their trade secrets</p></li>
<li><p>Allow the users to identify the hardware platform most suitable for their problems and utilise it to its best</p></li>
<li><p>Discourage independent efforts to extract/infer undisclosed information.
This prevents hardware companies from being falsely accused of suboptimal service and/or overcharging consumers.</p></li>
</ul>
<p>To reach these goals, we believe metadata should be different at the different layers of the HAL.
Table entries marked as required are described in more details at the bottom of this section.
We will use the definition <em>valid</em> to indicate that the circuit, shot, or gate does not infringe
the information provided by the metadata (e.g. a five-qubit circuit on a four-qubit system).</p>
<p>Tables should be seen as extensions of the higher levels. For example, Level 2 MUST contain all the fields of Level 3.
Fields of an higher level HAL MAY be converted from OPTIONAL to REQUIRED but not vice-versa.</p>
</section>
<section id="level-3-hal-application-level">
<h2>Level 3 HAL – application level<a class="headerlink" href="#level-3-hal-application-level" title="Permalink to this headline"></a></h2>
<p>“Able to run large batches of circuits”.</p>
<p>At this level, the final stage compiler (executed by the hardware lab) takes care
of converting an abstract representation made with universal gatesets, into a native one.</p>
<p>Users are entitled to:</p>
<ul class="simple">
<li><p>Fair billing. Note that the cost per time on the quantum machine will likely be different from that on the supporting classical infrastructure.</p></li>
</ul>
<p>Users won’t appreciate:</p>
<ul class="simple">
<li><p>If they send a valid circuit and it gets refused/does not complete in time.</p></li>
</ul>
<p>Hardware companies won’t appreciate:</p>
<ul class="simple">
<li><p>Unfair accusations on performance/correctness/costing that can’t be easily disproved
and might lead to legal actions.</p></li>
</ul>
<table class="docutils align-default" id="table-1">
<caption><span class="caption-number">Table 5 </span><span class="caption-text">Level 3 Metadata</span><a class="headerlink" href="#table-1" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>NUM_QBITS</strong></p></td>
<td><p>Number of qubits available</p></td>
<td><p>Yes</p></td>
<td><p>It can be smaller than the actual number of qubits in the quantum machine.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MAX_DEPTH</strong> (as universal gates)</p></td>
<td><p>Maximum depth of the circuit to execute</p></td>
<td><p>Yes</p></td>
<td><p>If <strong>NATIVE_GATES</strong> are not provided, this needs to be a conservative value. The conversion from a universal to a native gate set causes not deterministic (but bound) overhead.</p></td>
</tr>
<tr class="row-even"><td><p><strong>NATIVE_GATES</strong></p></td>
<td><p>List of Native Gates</p></td>
<td><p>No</p></td>
<td><p>The <strong>MAX_DEPTH</strong> could be improved significantly by providing the definition of native gates here. Effect: Users will benefit from longer circuits.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>GATE_TIMES</strong></p></td>
<td><p>The duration of the gates in <strong>NATIVE_GATES</strong></p></td>
<td><p>No</p></td>
<td><p>With this information, users will be able to optimise their running costs. Note that advanced users are able to infer this information regardless of whether it is provided by the HAL.</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>NUM_QUBITS</strong>:</p>
<ul>
<li><p>Type: unsigned int</p></li>
<li><p>Example: 5</p></li>
<li><p>Forbidden Values: [0]</p></li>
</ul>
</li>
<li><p><strong>MAX_DEPTH</strong>:</p>
<ul>
<li><p>Type: unsigned int</p></li>
<li><p>Example: 200</p></li>
<li><p>Forbidden Values: [0]</p></li>
</ul>
</li>
</ul>
</section>
<section id="level-2-hal-shot-level">
<h2>Level 2 HAL – shot level<a class="headerlink" href="#level-2-hal-shot-level" title="Permalink to this headline"></a></h2>
<p>“The results of a single circuit and small batches of circuits can be acted upon.”</p>
<p>At this level, the final stage compiler (executed by the hardware lab) takes care of converting
and mapping a native representation of a circuit and executing it.
Conversion is performed “on the fly”.</p>
<p>Users are entitled to:</p>
<ul class="simple">
<li><p>Fair billing. Note that the cost per time on the quantum machine will likely be different from that on the supporting classical infrastructure.</p></li>
<li><p>Guaranteed execution. If they send a valid circuit, it shouldn’t get refused as it might be part of a long sequence.</p></li>
</ul>
<p>Users won’t appreciate:</p>
<ul class="simple">
<li><p>Unknown QoS – mainly if the error rates are unknown</p></li>
</ul>
<p>Hardware companies won’t appreciate:</p>
<ul class="simple">
<li><p>Unfair accusations on performance/costing that can’t be easily disproved and might lead to legal actions.</p></li>
</ul>
<table class="docutils align-default" id="table-2">
<caption><span class="caption-number">Table 6 </span><span class="caption-text">Level 2 Metadata</span><a class="headerlink" href="#table-2" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>NUM_QBITS</strong></p></td>
<td><p>Number of Qubits available</p></td>
<td><p>Yes</p></td>
<td><p>It can be smaller than the actual number of qubits in the quantum machine.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MAX_DEPTH</strong> (as native gates)</p></td>
<td><p>Maximum depth of the circuit to execute</p></td>
<td><p>Yes</p></td>
<td><p>Total number of gates that can be executed. Without the <strong>GATE_TIMES</strong> information the depth will be conservative to allow for additional margin within the coherence time.</p></td>
</tr>
<tr class="row-even"><td><p><strong>NATIVE_GATES</strong></p></td>
<td><p>List of Native Gates</p></td>
<td><p>Yes</p></td>
<td><p>It can be a subset of all the available gates</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CONNECTIVITY</strong></p></td>
<td><p>The connectivity matrix of the Qubits</p></td>
<td><p>Yes</p></td>
<td><p>It is required to support correct compilation of circuits.
The hardware company can return a subgraph of the connectivity as
they deem appropriate (e.g. when only a subset of the qubits is exposed
they won’t need to expose the full connectivity).
Connectivity MUST be maintained within two Metadata updates.</p></td>
</tr>
<tr class="row-even"><td><p><strong>GATE_TIMES</strong></p></td>
<td><p>The duration of the gates in <strong>NATIVE_GATES</strong></p></td>
<td><p>No</p></td>
<td><p>With this information, users will be able to optimise their running costs. Note that advanced users are able to infer this information regardless of whether it is provided by the HAL.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ERROR_RATE</strong></p></td>
<td><p>The average error rate for one- and two-qubit operations in <strong>NATIVE_GATES</strong></p></td>
<td><p>No</p></td>
<td><p>Without this information the users will have to personally evaluate the performance of the hardware before committing to run intensive applications.
Users at this level have all the information required to run randomised benchmarking or similar techniques to extract the metrics.</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>NATIVE_GATES</strong>:</p>
<ul class="simple">
<li><p>Type: List of unsigned ints representing HAL gate indexes (specified in HAL library)</p></li>
<li><p>Example: 10 (RX gate), 30 (H Gate), 60 (CNOT)</p></li>
<li><p>Forbidden Values:</p>
<ul>
<li><p>Any index not included in HAL library</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>CONNECTIVITY</strong>:</p>
<ul class="simple">
<li><p>An adjacency matrix (symmetric) of size N x N (where N is the number of qubits) that represents with a 1 an edge that connects two qubits and with a 0 a not-connected edge</p></li>
<li><p>Example (refer to <a class="reference internal" href="#fig-topology-example"><span class="std std-numref">Fig. 2</span></a>):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">CONNECTIVITY</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Forbidden Values: Empty matrices</p></li>
</ul>
</li>
<li><p><strong>ERROR RATE</strong>:</p>
<ul class="simple">
<li><p>Error rate is defined as the probability for a quantum operation to introduce an error.
A matrix of size N x N (where N is the number of qubits that contains:
on the diagonal an average error rate for 1 qubit gate(s);
off-diagonal the average error rate of 2 qubits gate(s).
To clarify <strong>ERROR_RATE</strong> (1,1) describes the average error rate when
executing single qubit gates on qubit0; <strong>ERROR_RATE</strong> (1,2) indicates
the average error rate when executing gates two qubit gates on qubit0
and qubit1 with (where applicable) 1 being the control qubit and 2 the
target one. Multiple matrices can be returned to define the behaviour of
different gates. Optionally the values can be provided as intervals.</p></li>
</ul>
</li>
<li><p>Example:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                <span class="p">[</span><span class="mf">0.014</span> <span class="mf">0.02</span>  <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mf">0.02</span>  <span class="mf">0.014</span> <span class="mi">1</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span>     <span class="mf">0.021</span> <span class="mf">0.013</span> <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mf">0.015</span> <span class="mi">1</span>     <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
<span class="n">ERROR_RATE</span> <span class="o">=</span>    <span class="p">[</span><span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mf">0.012</span> <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mf">0.016</span> <span class="mi">0</span>      <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mf">0.011</span>  <span class="mi">0</span>    <span class="p">]</span>
                <span class="p">[</span><span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mf">0.02</span>   <span class="mf">0.012</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Forbidden Values: Empty matrices and matrices that violate connectivity. Entries outside the range [0,1].</p></li>
</ul>
<figure class="align-default" id="figure-1">
<span id="fig-topology-example"></span><img alt="_images/image2.png" src="_images/image2.png" />
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Topology used in the example</span><a class="headerlink" href="#figure-1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="level-1-hal-gate-level">
<h2>Level 1 HAL – gate level<a class="headerlink" href="#level-1-hal-gate-level" title="Permalink to this headline"></a></h2>
<p>“Results of qubit measurement can be acted upon within a single circuit.”</p>
<p>At this level, the final stage compiler (executed by the hardware lab) takes care of converting and mapping a single gate and executing it.</p>
<table class="docutils align-default" id="table-3">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">Level 1 Metadata</span><a class="headerlink" href="#table-3" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>NUM_QBITS</strong></p></td>
<td><p>Number of Qubits available</p></td>
<td><p>Yes</p></td>
<td><p>It can be lower than the actual number of available qubits.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MAX_DEPTH</strong> (as native gates)</p></td>
<td><p>Maximum depth of the circuit to execute</p></td>
<td><p>Yes</p></td>
<td><p>Total number of gates that can be executed.</p></td>
</tr>
<tr class="row-even"><td><p><strong>NATIVE_GATES</strong></p></td>
<td><p>List of Native Gates</p></td>
<td><p>Yes</p></td>
<td><p>It can be a subset of all the available gates</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CONNECTIVITY</strong></p></td>
<td><p>The connectivity matrix of the Qubits</p></td>
<td><p>Yes</p></td>
<td><p>It is required to support correct compilation of circuits.</p></td>
</tr>
<tr class="row-even"><td><p><strong>GATE_TIMES</strong></p></td>
<td><p>The duration of the gates in <strong>NATIVE_GATES</strong></p></td>
<td><p>Yes</p></td>
<td><p>Shuttling time should be considered as an atomic command of which time execution will be required. This to prevent performance inconsistencies</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ERROR_RATE</strong></p></td>
<td><p>The average error rate for one- and two-qubit operations in <strong>NATIVE_GATES</strong></p></td>
<td><p>No</p></td>
<td><p>Without this information the users will have to personally evaluate the performance of the hardware before committing to run intensive applications.
Users at this level have all the information required to run randomised benchmarking or similar techniques to extract the metrics.</p></td>
</tr>
</tbody>
</table>
<p><strong>MAX_DEPTH</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Type: unsigned int [unit ps]</p></li>
<li><p>Example: 32000000 ps[32 us]</p></li>
<li><p>Forbidden Values: [0]</p></li>
</ul>
</div></blockquote>
<p><strong>GATE_TIMES</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Type: List of unsigned int [unit ps]</p></li>
<li><p>Example: X: 16000, Y: 16000, CNOT: 28000</p></li>
<li><p>Forbidden Values: [0]</p></li>
</ul>
</div></blockquote>
<p><strong>ERROR_RATE</strong>: [optional]</p>
<blockquote>
<div><ul class="simple">
<li><p>Type: List of decimal numbers (between 0 and 1) defining probability of quantum
gate to introduce an error.</p></li>
<li><p>Example: X: 0.05 , Y: 0.04</p></li>
<li><p>Forbidden Values: Any usage of NaN (not a number)</p></li>
</ul>
</div></blockquote>
</section>
<section id="metadata-encoding">
<h2>Metadata Encoding<a class="headerlink" href="#metadata-encoding" title="Permalink to this headline"></a></h2>
<p>Here we outline the format in which metadata requests and results are encoded
into 64 bit HAL commands. Depending on the metadata requested the result will
either be returned as a single 64 bit integer or a stream of 64 bit integers
to be collected and decoded into the appropriate data format.</p>
<p>Below is the list of individual metadata items that may be requested and the
structure of their corresponding HAL command request:</p>
<table class="docutils align-default" id="table-4">
<caption><span class="caption-number">Table 8 </span><span class="caption-text">Summary of metadata indexes</span><a class="headerlink" href="#table-4" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata</p></th>
<th class="head"><p>Index (binary)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NUM_QUBITS</p></td>
<td><p>1 (001)</p></td>
</tr>
<tr class="row-odd"><td><p>MAX_DEPTH</p></td>
<td><p>2 (010)</p></td>
</tr>
<tr class="row-even"><td><p>NATIVE_GATES/GATE_TIMES</p></td>
<td><p>3 (011)</p></td>
</tr>
<tr class="row-odd"><td><p>CONNECTIVITY</p></td>
<td><p>4 (100)</p></td>
</tr>
<tr class="row-even"><td><p>ERROR_RATE</p></td>
<td><p>5 (101)</p></td>
</tr>
</tbody>
</table>
<p><strong>NUM_QUBITS</strong>:</p>
<ul class="simple">
<li><p>Request</p></li>
</ul>
<table class="docutils align-default" id="table-5">
<caption><span class="caption-number">Table 9 </span><span class="caption-text">HAL command for NUM_QUBITS metadata</span><a class="headerlink" href="#table-5" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Opcode [12]</p></th>
<th class="head"><p>Argument [16]</p></th>
<th class="head"><p>Padding [36]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>000000001000</p></td>
<td><p>0000000000000001</p></td>
<td><p>000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Response (single)</p></li>
</ul>
<table class="docutils align-default" id="table-6">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">HAL response for NUM_QUBITS metadata</span><a class="headerlink" href="#table-6" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata Index [3] <em>(NUM_QUBITS = 1)</em></p></th>
<th class="head"><p>Number of qubits [61] <em>(e.g. 4 qubits)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>001</p></td>
<td><p>000000000000000000000000000000000000000000000000000000000100</p></td>
</tr>
</tbody>
</table>
<p><strong>MAX_DEPTH</strong>:</p>
<ul class="simple">
<li><p>Request</p></li>
</ul>
<table class="docutils align-default" id="table-7">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">HAL command for MAX_DEPTH metadata</span><a class="headerlink" href="#table-7" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Opcode [12]</p></th>
<th class="head"><p>Argument [16]</p></th>
<th class="head"><p>Padding [36]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>000000001000</p></td>
<td><p>0000000000000010</p></td>
<td><p>000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Response (single)</p></li>
</ul>
<table class="docutils align-default" id="table-8">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">HAL response for MAX_DEPTH metadata</span><a class="headerlink" href="#table-8" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata Index [3] <em>(MAX_DEPTH = 2)</em></p></th>
<th class="head"><p>Number of qubits [61] <em>(e.g. 200)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>010</p></td>
<td><p>000000000000000000000000000000000000000000000000000011001000</p></td>
</tr>
</tbody>
</table>
<p><strong>NATIVE_GATES/GATE_TIMES</strong>:</p>
<ul class="simple">
<li><p>Request</p></li>
</ul>
<table class="docutils align-default" id="table-9">
<caption><span class="caption-number">Table 13 </span><span class="caption-text">HAL command for NATIVE_GATES/GATE_TIMES metadata</span><a class="headerlink" href="#table-9" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Opcode [12]</p></th>
<th class="head"><p>Argument [16] <em>(3)</em></p></th>
<th class="head"><p>Padding [36]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>000000001000</p></td>
<td><p>0000000000000011</p></td>
<td><p>000000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Response (one per native gate)</p></li>
</ul>
<table class="docutils align-default" id="table-10">
<caption><span class="caption-number">Table 14 </span><span class="caption-text">HAL response for NATIVE_GATES/GATE_TIMES metadata</span><a class="headerlink" href="#table-10" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata Index [3] <em>(3)</em></p></th>
<th class="head"><p>Final [1] <em>(e.g. True)</em></p></th>
<th class="head"><p>Gate index [4] <em>(e.g. 0)</em></p></th>
<th class="head"><p>Opcode [12] <em>(e.g. 10 = RX gate)</em></p></th>
<th class="head"><p>Gate Time [44] <em>(e.g. 16000 ps)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>011</p></td>
<td><p>1</p></td>
<td><p>0000</p></td>
<td><p>000000001010</p></td>
<td><p>0000000000000000000000000000000011111010000000</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Notes:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Final</strong>: flag used to specify last stream packet</p></li>
<li><p><strong>Gate index</strong>: used to enumerate the native gates, where the gates can
be described by the opcode+parameter. The gate indexes are used when
requesting native gate-specific metadata, such as the ERROR_RATE below</p></li>
<li><p><strong>Gate Time</strong>: 44-bit unsigned integer for gate time, specified in picoseconds</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>CONNECTIVITY</strong>:</p>
<ul class="simple">
<li><p>Request</p></li>
</ul>
<table class="docutils align-default" id="table-11">
<caption><span class="caption-number">Table 15 </span><span class="caption-text">HAL command for CONNECTIVITY metadata</span><a class="headerlink" href="#table-11" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Opcode [12]</p></th>
<th class="head"><p>Argument [16] <em>(4)</em></p></th>
<th class="head"><p>Single row [1] <em>(e.g. False)</em></p></th>
<th class="head"><p>Row index [35] <em>(e.g. 0)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>000000001000</p></td>
<td><p>0000000000000100</p></td>
<td><p>0</p></td>
<td><p>00000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Response (one per N/3 groupings of non-zero off-diagonal matrix elements)</p></li>
</ul>
<table class="docutils align-default" id="table-12">
<caption><span class="caption-number">Table 16 </span><span class="caption-text">HAL response for CONNECTIVITY metadata</span><a class="headerlink" href="#table-12" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata Index [3] <em>(4)</em></p></th>
<th class="head"><p>Final [1] <em>(e.g. False)</em></p></th>
<th class="head"><p>Row idx 1 [10] <em>(e.g. 0)</em></p></th>
<th class="head"><p>Col idx 1 [10] <em>(e.g. 1)</em></p></th>
<th class="head"><p>Row idx 2 [10] <em>(e.g. 1)</em></p></th>
<th class="head"><p>Col idx 2 [10] <em>(e.g. 2)</em></p></th>
<th class="head"><p>Row idx 3 [10] <em>(e.g. 2)</em></p></th>
<th class="head"><p>Col idx 3 [10] <em>(e.g. 3)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>100</p></td>
<td><p>0</p></td>
<td><p>0000000000</p></td>
<td><p>0000000001</p></td>
<td><p>0000000001</p></td>
<td><p>0000000010</p></td>
<td><p>0000000010</p></td>
<td><p>0000000011</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Notes:</p>
<blockquote>
<div><ul class="simple">
<li><p>We make use of the 36-bit padding in the HAL request to specify if we
want the whole matrix back or just a single row</p></li>
<li><p><strong>Final</strong>: Non-zero off-diagonal row/column pairs are returned in groups
of 3 in row-order, where the final respone packet is marked by this flag</p></li>
<li><p>Connectivity matrix is symmetric, so only off-diagonal upper half of
matrix is returned</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>ERROR_RATE</strong>:</p>
<ul class="simple">
<li><p>Request</p></li>
</ul>
<table class="docutils align-default" id="table-13">
<caption><span class="caption-number">Table 17 </span><span class="caption-text">HAL command for ERROR_RATE metadata</span><a class="headerlink" href="#table-13" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Opcode [12]</p></th>
<th class="head"><p>Argument [16] <em>(5)</em></p></th>
<th class="head"><p>Gate index [3] <em>(e.g. 2)</em></p></th>
<th class="head"><p>Single row [1] <em>(e.g. False)</em></p></th>
<th class="head"><p>Row index [32] <em>(e.g. 0)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>000000001000</p></td>
<td><p>0000000000000101</p></td>
<td><p>010</p></td>
<td><p>0</p></td>
<td><p>00000000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Response (one per N/4 groupings of non-zero matrix elements)</p></li>
</ul>
<table class="docutils align-default" id="table-14">
<caption><span class="caption-number">Table 18 </span><span class="caption-text">HAL response for ERROR_RATE metadata (first 8 bits)</span><a class="headerlink" href="#table-14" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Metadata Index [3] <em>(5)</em></p></th>
<th class="head"><p>Final [1] <em>(e.g. False)</em></p></th>
<th class="head"><p>Diagonal [1] <em>(e.g. True)</em></p></th>
<th class="head"><p>Gate index [3] <em>(e.g. 2)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>101</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>010</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="table-15">
<caption><span class="caption-number">Table 19 </span><span class="caption-text">HAL response for ERROR_RATE metadata (final 56 bits)</span><a class="headerlink" href="#table-15" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Mantissa 1 [10] <em>(e.g. 2)</em></p></th>
<th class="head"><p>Exponent 1 [4] <em>(e.g. 1)</em></p></th>
<th class="head"><p>Mantissa 2 [10] <em>(e.g. 3)</em></p></th>
<th class="head"><p>Exponent 2 [4] <em>(e.g. 1)</em></p></th>
<th class="head"><p>Mantissa 3 [10] <em>(e.g. 4)</em></p></th>
<th class="head"><p>Exponent 3 [4] <em>(e.g. 1)</em></p></th>
<th class="head"><p>Mantissa 3 [10] <em>(e.g. 3)</em></p></th>
<th class="head"><p>Exponent 3 [4] <em>(e.g. 1)</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0000000010</p></td>
<td><p>0001</p></td>
<td><p>0000000011</p></td>
<td><p>0001</p></td>
<td><p>0000000100</p></td>
<td><p>0001</p></td>
<td><p>0000000011</p></td>
<td><p>0001</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Notes:</p>
<ul>
<li><p>We make use of the 36-bit padding in the HAL request to specify which
native gate we want data for (obtained from the order of NATIVE_GATES
metadata responses), and if we want the whole matrix back or just a single row</p></li>
<li><p><strong>Final</strong>: Non-zero error rate values are returned in groups
of 4 in top-left to bottom-right order for diagonal (1-qubit gate) data,
and in the same order of row/column indexes returned from CONNECTIVITY metadata
request for off-diagonal (2-qubit gate) data. The final respone packet
for a given gate is marked by this flag</p></li>
<li><p>Error rate data (value between 0 and 1) is stored in a pair of integers
with a 10-bit mantissa and 4-bit exponent (distance of mantissa from decimal
point). This allows us to store mantissas up to three 9s, up to 15 places
after the decimal point. For example, the number 0.01 is expressed by
0000000001|0001, and the number 0.00245 is expressed by 0011110101|0010</p></li>
<li><p>Error rate matrix is <strong>not</strong> symmetric, so off-diagonal upper and lower
halves of matrix returned. Upper half row is returned in the same order of
row/column indexes returned from CONNECTIVITY metadata request (row-wise).
Each row return is followed by column return from lower half with same index,
before moving to the next upper half row.</p></li>
<li><p><strong>Must</strong> have knowledge of CONNECTIVITY metadata in order to map the error
rate values to appropriate qubits</p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hal_architecture.html" class="btn btn-neutral float-left" title="HAL Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="minimal_req.html" class="btn btn-neutral float-right" title="HAL Commands Minimal Requirements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ISCF Quantum HAL Steering Consortium.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: v0.2.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      
      <dl>
        <dt>Versions</dt>
        
           <strong> 
          <dd><a href="/QHAL_internal/v0.2.0/">v0.2.0</a></dd>
           </strong> 
        
          
          <dd><a href="/QHAL_internal/dev/">dev</a></dd>
          
        
          
          <dd><a href="/QHAL_internal/v0.1.0/">v0.1.0</a></dd>
          
        
          
          <dd><a href="/QHAL_internal/v0.1.1/">v0.1.1</a></dd>
          
        
      </dl>
      
      
      
      <hr/>
      Document hosting provided by <a href="https://pages.github.com/">GitHub Pages</a>.
 
    </div>
  </div>

 <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>